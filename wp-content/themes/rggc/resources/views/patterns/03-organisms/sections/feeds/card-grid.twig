{% set base_class = card_grid.base_class|default('c-card-grid') %}

{% if card_grid %}
	<div class="c-card-grid u-spacing">
		<div class="c-card-grid__background-cover" style="background-image:url({{ card_grid.background }}"></div>
		<div class="l-wrap l-container">
			{% if card_grid.heading or card_grid.dek %}
				<div class="c-card-grid__header u-padding--triple--bottom">
					{% include "@atoms/text/heading/heading.twig" with {
            "heading": {
              "level": "2",
              "size": "xl",
              "type": "primary",
              "text": card_grid.heading,
              "extra": bem_classes(base_class, 'heading')
            }
          } %}
					{% include "@atoms/text/dek/dek.twig" with {
            "dek": {
              "text": card_grid.dek,
              "extra": [
                bem_classes(base_class, 'dek'),
                "l-container--m"
              ]
            }
          } %}
				</div>
			{% endif %}
			{% if card_grid.posts %}
				<div class="c-card-grid__posts" bp="grid 12 6@sm 4@md">
					{% for post in card_grid.posts %}
						{% include "@molecules/cards/card.twig" with {
              "card": post
            } %}
					{% endfor %}
				</div>
			{% else %}
				<p>Sorry, there are no posts at this time.</p>
			{% endif %}
			<div class="c-card-grid__cta">
				{% include '@atoms/buttons/button.twig' with {
          button: {
            text: "Explore More Projects",
            url: "#",
            target: "",
            extra: bem_classes(base_class, 'button')
          }
        } %}
			</div>
		</div>
	</div>
{% endif %}
